(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[186],{38624:function(e,n,t){"use strict";t.r(n);var r=t(8529),s=t(20406),a=t(28526),i=t.n(a),c=t(2784),u=t(64033),o=t(69204),l=t(3850),d=t(41135),x=t(50050),f=t(42840),h=t(46652),v=t(1525),p=t(79338),m=t(26106),j=t(97729),b=t(5632),k=t(10508),w=t(64618),g=t(95321),N=t(52322),C=function(e){var n=e.name,t=(0,w.$6)().ensProvider,r=(0,c.useMemo)((function(){return/^0x[a-z0-9]{40}$/i.test(n)}),[n]),a=(0,c.useState)(r?void 0:null),l=a[0],d=a[1];return(0,c.useMemo)((function(){if(!r){var e=function(){var e=(0,s.Z)(i().mark((function e(){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===t||void 0===t?void 0:t.resolveName(n);case 2:r=e.sent,d(null!==r&&void 0!==r?r:"Not Found");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}}),[r,t,n]),(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(u.xv,{children:[n,null!=l&&(0,N.jsxs)(u.xv,{ml:2,as:"em",children:["(",l,")"]})]}),null===l&&(0,N.jsx)(o.$,{size:"xs"})]})},E=function(e){return e.split(/\s*[\s,;:/\\|]+\s*/).filter((function(e){return e&&""!==e}))};n.default=function(){var e=(0,b.useRouter)().query.nftId;if(Array.isArray(e)){var n=e,t=(0,r.Z)(n,1);e=t[0]}var a=(0,c.useState)(),S=a[0],y=a[1],_=(0,c.useState)(),Z=_[0],I=_[1],O=(0,c.useState)(),P=O[0],T=O[1],F=(0,c.useState)(""),A=F[0],D=F[1],M=(0,c.useState)("whitelist"),X=M[0],$=M[1],z=(0,w.$6)(),K=z.ensProvider,L=z.address,H=z.roContract,R=(z.connected,z.connect,(0,c.useState)([])),W=R[0],q=R[1],Y=(0,l.pm)();(0,c.useEffect)((function(){var e=function(){var e=(0,s.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:q(E(A).map((function(e,n){return(0,N.jsx)(C,{name:e},n)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[K,A]);var B=(0,c.useMemo)((function(){var n;return null!==(n=null===Z||void 0===Z?void 0:Z.name)&&void 0!==n?n:"#".concat(e)}),[Z,e]);(0,c.useEffect)((function(){var n=function(){var n=(0,s.Z)(i().mark((function n(){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(H&&L&&e)){n.next=14;break}return n.prev=1,n.t0=y,n.t1=Number,n.next=6,H.balanceOf(L,e);case 6:n.t2=n.sent.toString(),n.t3=(0,n.t1)(n.t2),(0,n.t0)(n.t3),n.next=14;break;case 11:n.prev=11,n.t4=n.catch(1),T(n.t4.message);case 14:case"end":return n.stop()}}),n,null,[[1,11]])})));return function(){return n.apply(this,arguments)}}();n()}),[L,H,e]),(0,c.useEffect)((function(){var n=function(){var n=(0,s.Z)(i().mark((function n(){var t,r;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!H||!e){n.next=23;break}return n.prev=1,n.next=4,H.uri(e);case 4:if(t=n.sent,console.log("LOOK HERE",{meta:t,tokenId:e}),t){n.next=10;break}I(null),n.next=18;break;case 10:return n.next=12,fetch((0,k._m)(t));case 12:return r=n.sent,n.t0=I,n.next=16,r.json();case 16:n.t1=n.sent,(0,n.t0)(n.t1);case 18:n.next=23;break;case 20:n.prev=20,n.t2=n.catch(1),T(n.t2.message);case 23:case"end":return n.stop()}}),n,null,[[1,20]])})));return function(){return n.apply(this,arguments)}}();n()}),[H,e]);var G=(0,c.useCallback)(function(){var e=(0,s.Z)(i().mark((function e(n){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,n.target.skip.checked,e.next=5,Promise.all(E(A).map(function(){var e=(0,s.Z)(i().mark((function e(n){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===K||void 0===K?void 0:K.resolveName(n);case 2:if(t=e.sent){e.next=5;break}throw new Error("Couldn't Resolve Name: \u201c".concat(n,"\u201d"));case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()));case 5:t=e.sent,e.t0=X,e.next="mint"===e.t0?9:"whitelist"===e.t0?11:13;break;case 9:return console.debug("minting",{addrs:t}),e.abrupt("break",13);case 11:return console.debug("whitelist",{addrs:t}),e.abrupt("break",13);case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(1),Y({title:"".concat((0,k.kC)(X),"ing Error"),description:e.t1.message,status:"error",isClosable:!0,duration:1e4});case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(n){return e.apply(this,arguments)}}(),[X,W,K]);return P?(0,N.jsxs)(d.bZ,{status:"error",children:[(0,N.jsx)(d.zM,{}),(0,N.jsx)(d.Cd,{mr:2,children:"Error: Loading NFT"}),(0,N.jsx)(d.X,{children:P})]}):(0,N.jsxs)(u.W2,{maxW:"40rem",children:[(0,N.jsxs)(j.default,{children:[(0,N.jsxs)("title",{children:["Disburse NFT #",e]}),(0,N.jsx)("meta",{name:"description",content:"Distribute A \u2019Chievemint NFT"})]}),(0,N.jsx)(g.dL,{}),(0,N.jsxs)(u.Kq,{as:"form",onSubmit:G,children:[null===Z?(0,N.jsxs)(u.xv,{my:8,children:["Token ",B," does not exist."]}):L?null==S?(0,N.jsxs)(u.kC,{my:8,children:[(0,N.jsx)(o.$,{}),(0,N.jsx)(u.xv,{ml:2,children:"Loading Balance\u2026"})]}):(0,N.jsxs)(u.xv,{my:8,children:["Distribute up to ",S," \u201c",B,"\u201d tokens:"]}):(0,N.jsxs)(u.xv,{my:8,children:["Connect your wallet to distribute \u201c",B,"\u201d tokens\u2026"]}),(0,N.jsxs)(x.mQ,{isFitted:!0,variant:"enclosed",children:[(0,N.jsxs)(x.td,{mb:"1em",children:[(0,N.jsx)(x.OK,{children:"CSV"}),(0,N.jsx)(x.OK,{children:"Parsed"})]}),(0,N.jsxs)(x.nP,{children:[(0,N.jsx)(x.x4,{children:(0,N.jsxs)(f.NI,{children:[(0,N.jsx)(f.lX,{children:"Comma, Space, or Semicolon Separated ETH or ENS Addresses:"}),(0,N.jsx)(h.g,{height:64,placeholder:"Enter space, semicolon, or comma separated eth addresses.",value:A,onChange:function(e){var n=e.target.value;return D(n)}})]})}),(0,N.jsx)(x.x4,{children:(0,N.jsx)(u.GS,{children:W.map((function(e,n){return(0,N.jsx)(u.HC,{justifyContent:"center",children:e},n)}))})})]})]}),(0,N.jsx)(f.NI,{children:(0,N.jsxs)(v.Ee,{onChange:$,value:X,children:[(0,N.jsx)(v.Y8,{value:"mint",children:"Mint"}),(0,N.jsx)(v.Y8,{value:"whitelist",ml:5,children:"Whitelist"})]})}),(0,N.jsx)(f.NI,{children:(0,N.jsx)(p.XZ,{name:"skip",value:"true",children:"Skip existing holders"})}),(0,N.jsx)(f.NI,{textAlign:"center",children:(0,N.jsx)(m.zx,{type:"submit",colorScheme:"green",children:"Distribute"})})]})]})}},21915:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/disburse/[nftId]",function(){return t(38624)}])}},function(e){e.O(0,[730,338,321,774,888,179],(function(){return n=21915,e(e.s=n);var n}));var n=e.O();_N_E=n}]);