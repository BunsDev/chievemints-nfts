(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[971],{27327:function(e,r,n){"use strict";n.r(r),n.d(r,{New:function(){return N}});var t=n(95235),c=n(8529),s=n(20406),a=n(28526),i=n.n(a),o=n(78082),u=n(64033),l=n(41215),d=n(3850),h=n(69204),x=n(26106),f=n(80038),p=n(86915),j=n(79338),v=n(64618),b=n(2784),m=n(2241),w=n(10508),g=n(97729),k=n(5632),y=n(63955),C=n(52322);function O(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function E(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?O(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var N=function(){return(0,C.jsxs)(u.W2,{maxW:"full",children:[(0,C.jsx)(g.default,{children:(0,C.jsx)("title",{children:"\u2019\ud835\udd88\ud835\udd8d\ud835\udd8e\ud835\udd8a\ud835\udd9b\ud835\udd8a: \u2c9a\u2c89\u2cb1 \u2ca6\u2c9f\u2c95\u2c89\u2c9b"})}),(0,C.jsx)(l.m$.header,{children:(0,C.jsx)(u.kC,{justify:"center",children:(0,C.jsx)(o.h4,{my:"7vh",maxW:"xl"})})}),(0,C.jsx)(l.m$.main,{children:(0,C.jsx)(P,{})})]})},P=function(){var e=(0,v.$6)(),r=e.ensProvider,n=e.roContract,t=e.rwContract,a=e.connecting,g=e.connect,O=e.chain,N=e.address,P=(0,k.useRouter)().query.tokenId,S=(0,b.useState)(Array.isArray(P)?P[0]:P),_=S[0],I=S[1],T=(0,b.useState)([]),Z=T[0],A=T[1],$=(0,b.useState)(!1),D=$[0],R=$[1],X=(0,y.cI)(),F=X.register,q=X.handleSubmit,z=(0,d.pm)();(0,b.useEffect)((function(){"string"===typeof P&&I(P)}),[P]),(0,b.useEffect)((function(){var e=function(){var e=(0,s.Z)(i().mark((function e(){var r,t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=10;break}return console.log({roContract:n}),e.next=4,n.roleIndexForName("ReservedLast");case 4:return e.t0=e.sent,r=e.t0-1,e.next=8,Promise.all(Array.from({length:r}).map(function(){var e=(0,s.Z)(i().mark((function e(r,t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.roleNameByIndex(t+1);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}()));case 8:t=e.sent,A(t);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[n]);var W=(0,b.useCallback)(function(){var e=(0,s.Z)(i().mark((function e(a){var o,u,l,d,h,x,f,p,j,v,b,m,w,g;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(R(!0),e.prev=1,t){e.next=4;break}throw new Error("Connect your wallet to reserve an id.");case 4:if(n){e.next=6;break}throw new Error("Library not loaded.");case 6:if(r){e.next=8;break}throw new Error("ENS provider not defined.");case 8:return o=[],u=[],e.next=12,Promise.all(Object.entries(a).map(function(){var e=(0,s.Z)(i().mark((function e(r){var n,s,a,l,d,h,x,f,p;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(0,c.Z)(r,2),s=n[0],"boolean"!==typeof(a=n[1])||!a){e.next=15;break}return d=null!==(l=s.match(/^(grant|disable)\((.+)\)$/))&&void 0!==l?l:[],h=(0,c.Z)(d,3),h[0],x=h[1],f=h[2],console.log({type:x,role:f}),e.next=6,t.roleIndexForName(f);case 6:p=e.sent,e.t0=x,e.next="grant"===e.t0?10:"disable"===e.t0?12:14;break;case 10:return o.push(p),e.abrupt("break",15);case 12:return u.push(p),e.abrupt("break",15);case 14:throw new Error("Unknown operation: ".concat(x));case 15:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()));case 12:if(""===(l=a.maintainer)&&(l=N),!l.includes(".")){e.next=18;break}return e.next=17,r.resolveName(l);case 17:l=e.sent;case 18:return e.next=20,t["create(address,uint8[],uint8[])"](l,o,u);case 20:return d=e.sent,e.next=23,d.wait();case 23:if(h=e.sent,x=h.events.find((function(e){return"Created"===e.event}))){e.next=27;break}throw new Error("Couldn\u2019t find a creation event.");case 27:f=(0,c.Z)(x.args,2),p=f[0],f[1],I(p.toHexString()),e.next=36;break;case 31:e.prev=31,e.t0=e.catch(1),console.error({error:e.t0}),g=null!==(j=null!==(v=null!==(b=null===(m=e.t0.error)||void 0===m?void 0:m.message)&&void 0!==b?b:null===(w=e.t0.data)||void 0===w?void 0:w.message)&&void 0!==v?v:e.t0.message)&&void 0!==j?j:e.t0,z({title:"Creation Error",description:g,status:"error",isClosable:!0,duration:1e4});case 36:return e.prev=36,R(!1),e.finish(36);case 39:case"end":return e.stop()}}),e,null,[[1,31,36,39]])})));return function(r){return e.apply(this,arguments)}}(),[t]);return t&&_&&!D?(0,C.jsx)(o.g_,{tokenId:_}):(0,C.jsx)(u.M5,{children:(0,C.jsxs)(u.Kq,{children:[(0,C.jsxs)(u.X6,{textAlign:"center",children:["Create a new",(0,C.jsx)(l.m$.span,{title:"Non-Fungible Token",ml:2,children:"NFT"})]}),a?(0,C.jsxs)(u.kC,{justify:"center",children:[(0,C.jsx)(h.$,{thickness:"4px"}),(0,C.jsx)(u.xv,{ml:2,children:"Connecting\u2026"})]}):O&&O!==m.g.contract.chainId?(0,C.jsxs)(x.zx,{colorScheme:"blue",onClick:function(){(0,w.gu)(m.g.contract.chainId)},children:["Switch to the",(0,C.jsx)(l.m$.span,{mx:1.5,title:"".concat(O," \u2260 ").concat(m.g.contract.chainId),children:m.g.contract.name}),"chain"]}):t?D?(0,C.jsxs)(u.kC,{justify:"center",mt:7,children:[(0,C.jsx)(h.$,{}),(0,C.jsx)(u.xv,{ml:2,children:"Reserving your token\u2026"})]}):_?(0,C.jsx)(u.xv,{children:"\xbfHow\u2019d we get here?"}):(0,C.jsxs)(u.Kq,{as:"form",onSubmit:q(W),children:[(0,C.jsx)(f.II,E(E({},F("maintainer")),{},{placeholder:"Maintainer Address (default Creator)"})),(0,C.jsxs)(p.iA,{mb:5,children:[(0,C.jsx)(p.hr,{children:(0,C.jsxs)(p.Tr,{children:[(0,C.jsx)(p.Th,{children:"Role"}),(0,C.jsx)(p.Th,{children:"Grant"}),(0,C.jsx)(p.Th,{children:"Disable"})]})}),(0,C.jsx)(p.p3,{children:Z.map((function(e,r){return(0,C.jsxs)(p.Tr,{children:[(0,C.jsx)(p.Td,{children:e}),(0,C.jsx)(p.Td,{textAlign:"center",children:(0,C.jsx)(j.XZ,E({},F("grant(".concat(e,")"))))}),(0,C.jsx)(p.Td,{textAlign:"center",children:(0,C.jsx)(j.XZ,E({},F("disable(".concat(e,")"))))})]},r)}))})]}),(0,C.jsx)(x.zx,{colorScheme:"green",type:"submit",children:"Reserve an ID"})]}):(0,C.jsx)(x.zx,{colorScheme:"blue",onClick:g,children:"Connect"})]})})};r.default=N},18310:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/new",function(){return n(27327)}])}},function(e){e.O(0,[730,338,82,774,888,179],(function(){return r=18310,e(e.s=r);var r}));var r=e.O();_N_E=r}]);