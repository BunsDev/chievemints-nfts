(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[971],{27327:function(e,r,n){"use strict";n.r(r),n.d(r,{New:function(){return S}});var t=n(95235),c=n(8529),s=n(20406),i=n(28526),a=n.n(i),o=n(64033),u=n(41215),l=n(3850),d=n(69204),h=n(26106),x=n(80038),f=n(86915),p=n(17833),j=n(79338),b=n(64618),m=n(2784),v=n(2241),w=n(97729),k=n(16036),g=n(5632),y=n(63955),C=n(8150),O=n(10508),E=n(52322);function P(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function T(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?P(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var S=function(){return(0,E.jsxs)(o.W2,{maxW:"full",children:[(0,E.jsx)(w.default,{children:(0,E.jsx)("title",{children:"\u2019\ud835\udd88\ud835\udd8d\ud835\udd8e\ud835\udd8a\ud835\udd9b\ud835\udd8a: \u2c9a\u2c89\u2cb1 \u2ca6\u2c9f\u2c95\u2c89\u2c9b"})}),(0,E.jsx)(u.m$.header,{children:(0,E.jsx)(o.kC,{justify:"center",children:(0,E.jsx)(k.h4,{my:"7vh",maxW:"xl"})})}),(0,E.jsx)(u.m$.main,{children:(0,E.jsx)(_,{})})]})},_=function(){var e=(0,b.$6)(),r=e.ensProvider,n=e.roContract,t=e.rwContract,i=e.connecting,w=e.connect,P=e.chain,S=e.address,_=(0,g.useRouter)().query.tokenId,I=(0,m.useState)(Array.isArray(_)?_[0]:_),N=I[0],Z=I[1],A=(0,m.useState)([]),$=A[0],D=A[1],R=(0,m.useState)(!1),X=R[0],q=R[1],z=(0,y.cI)(),W=z.register,B=z.handleSubmit,F=(0,l.pm)(),G=C.k.rolePermissions;(0,m.useEffect)((function(){"string"===typeof _&&Z(_)}),[_]),(0,m.useEffect)((function(){var e=function(){var e=(0,s.Z)(a().mark((function e(){var r,t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=9;break}return e.next=3,n.roleIndexForName("ReservedLast");case 3:return e.t0=e.sent,r=e.t0-1,e.next=7,Promise.all(Array.from({length:r}).map(function(){var e=(0,s.Z)(a().mark((function e(r,t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.roleNameByIndex(t+1);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}()));case 7:t=e.sent,D(t);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[n]);var H=(0,m.useCallback)(function(){var e=(0,s.Z)(a().mark((function e(i){var o,u,l,d,h,x,f,p;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(q(!0),e.prev=1,t){e.next=4;break}throw new Error("Connect your wallet to reserve an id.");case 4:if(n){e.next=6;break}throw new Error("Library not loaded.");case 6:return o=[],u=[],e.next=10,Promise.all(Object.entries(i).map(function(){var e=(0,s.Z)(a().mark((function e(r){var n,s,i,l,d,h,x,f,p;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(0,c.Z)(r,2),s=n[0],"boolean"!==typeof(i=n[1])||!i){e.next=14;break}return d=null!==(l=s.match(/^(grant|disable)\((.+)\)$/))&&void 0!==l?l:[],h=(0,c.Z)(d,3),x=h[1],f=h[2],e.next=5,t.roleIndexForName(f);case 5:p=e.sent,e.t0=x,e.next="grant"===e.t0?9:"disable"===e.t0?11:13;break;case 9:return o.push(p),e.abrupt("break",14);case 11:return u.push(p),e.abrupt("break",14);case 13:throw new Error("Unknown operation: ".concat(x));case 14:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()));case 10:if(""===(l=i.maintainer)&&(l=S),!l.includes(".")){e.next=18;break}if(r){e.next=15;break}throw new Error("ENS provider not defined.");case 15:return e.next=17,r.resolveName(l);case 17:l=e.sent;case 18:return e.next=20,t["create(address,uint8[],uint8[])"](l,o,u);case 20:return d=e.sent,e.next=23,d.wait();case 23:if(h=e.sent,x=h.events.find((function(e){return"Created"===e.event}))){e.next=27;break}throw new Error("Couldn\u2019t find a creation event.");case 27:f=(0,c.Z)(x.args,1),p=f[0],Z(p.toHexString()),e.next=35;break;case 31:e.prev=31,e.t0=e.catch(1),F({title:"Creation Error",description:(0,O.B9)(e.t0),status:"error",isClosable:!0,duration:1e4}),console.error(e.t0.stack);case 35:return e.prev=35,q(!1),e.finish(35);case 38:case"end":return e.stop()}}),e,null,[[1,31,35,38]])})));return function(r){return e.apply(this,arguments)}}(),[S,r,n,t,F]);return t&&N&&!X?(0,E.jsx)(k.g_,{tokenId:N}):(0,E.jsx)(o.M5,{children:(0,E.jsxs)(o.Kq,{children:[(0,E.jsx)(o.X6,{textAlign:"center",children:"Create a New Token Type"}),i?(0,E.jsxs)(o.kC,{justify:"center",children:[(0,E.jsx)(d.$,{thickness:"4px"}),(0,E.jsx)(o.xv,{ml:2,children:"Connecting\u2026"})]}):P&&P!==v.g.contract.chainId?(0,E.jsxs)(h.zx,{colorScheme:"blue",onClick:function(){(0,O.gu)(v.g.contract.chainId)},children:["Switch to the",(0,E.jsx)(u.m$.span,{mx:1.5,title:"".concat(P," \u2260 ").concat(v.g.contract.chainId),children:v.g.contract.name}),"chain"]}):t?X?(0,E.jsxs)(o.kC,{justify:"center",mt:7,children:[(0,E.jsx)(d.$,{}),(0,E.jsx)(o.xv,{ml:2,children:"Reserving your token\u2026"})]}):N?(0,E.jsx)(o.xv,{children:"\xbfHow\u2019d we get here?"}):(0,E.jsxs)(o.Kq,{as:"form",onSubmit:B(H),children:[(0,E.jsxs)(o.kC,{align:"center",children:[(0,E.jsx)(u.m$.label,{mr:3,children:"Admin:"}),(0,E.jsx)(x.II,T(T({},W("maintainer")),{},{placeholder:"Maintainer Address (default Creator)"}))]}),(0,E.jsxs)(f.iA,{mb:5,children:[(0,E.jsx)(f.hr,{children:(0,E.jsxs)(f.Tr,{children:[(0,E.jsx)(f.Th,{children:"Role"}),(0,E.jsx)(f.Th,{children:(0,E.jsx)(p.u,{label:"Give the admin these roles:",children:"Grant"})}),(0,E.jsx)(f.Th,{children:(0,E.jsx)(p.u,{label:"Prevent these permissions from being checked:",children:"Disable"})}),(0,E.jsx)(f.Th,{children:"Description"})]})}),(0,E.jsx)(f.p3,{children:$.map((function(e,r){return(0,E.jsxs)(f.Tr,{children:[(0,E.jsx)(f.Td,{children:e}),(0,E.jsx)(f.Td,{textAlign:"center",children:(0,E.jsx)(j.XZ,T({},W("grant(".concat(e,")"))))}),(0,E.jsx)(f.Td,{textAlign:"center",children:(0,E.jsx)(j.XZ,T({},W("disable(".concat(e,")"))))}),(0,E.jsx)(f.Td,{children:G[e]})]},r)}))})]}),(0,E.jsx)(h.zx,{colorScheme:"green",type:"submit",children:"Reserve an ID"})]}):(console.info({rwContract:t}),(0,E.jsx)(h.zx,{colorScheme:"blue",onClick:w,children:"Connect"}))]})})};r.default=S},18310:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/new",function(){return n(27327)}])}},function(e){e.O(0,[76,36,774,888,179],(function(){return r=18310,e(e.s=r);var r}));var r=e.O();_N_E=r}]);