"use strict";(self.webpackChunk_chievemints_ui=self.webpackChunk_chievemints_ui||[]).push([[233],{87233:(e,t,n)=>{n.r(t),n.d(t,{New:()=>p,default:()=>g});var r=n(64033),a=n(33541),l=n(54805),c=n(69204),i=n(80038),o=n(86915),m=n(70691),s=n(79338),u=n(2784),E=n(63955),d=n(18671),h=n(62833),f=n(18813),w=n(14738),b=n(60146),k=n(23244);const p=()=>u.createElement(r.W2,{maxW:"full"},u.createElement(d.q,null,u.createElement("title",null,"’𝖈𝖍𝖎𝖊𝖛𝖊: Ⲛⲉⲱ Ⲧⲟⲕⲉⲛ")),u.createElement(a.m$.header,null,u.createElement(r.kC,{justify:"center"},u.createElement(f.h4,{my:"7vh",maxW:"xl"}))),u.createElement(a.m$.main,null,u.createElement(v,null))),v=()=>{const{ensProvider:e,roContract:t,rwContract:n,rolesLibrary:d,connecting:p,connect:v,chain:g,address:y}=(0,w.$6)(),[C,x]=(0,h.lr)({tokenId:""}),T=C.get("tokenId"),[$,I]=(0,u.useState)(Array.isArray(T)?T[0]:T),[A,S]=(0,u.useState)(k.io),[N,_]=(0,u.useState)(!1),{register:j,handleSubmit:q}=(0,E.cI)(),D=(0,l.pm)();(0,u.useEffect)((()=>{"string"==typeof T&&I(T)}),[T]),(0,u.useEffect)((()=>{}),[t]);const M=(0,u.useCallback)((async t=>{_(!0);try{if(!n)throw new Error("Connect your wallet to reserve an id.");if(!d)throw new Error("Library not loaded.");const r=[],a=[];await Promise.all(Object.entries(t).map((async([e,t])=>{if("boolean"==typeof t&&t){const[,t,n]=e.match(/^(grant|disable)\((.+)\)$/)??[],l=await d.roleIndexForName(n);switch(t){case"grant":r.push(l);break;case"disable":a.push(l);break;default:throw new Error(`Unknown operation: ${t}`)}}})));let{maintainer:l}=t;if(""===l&&(l=y),null==l)throw new Error("`maintainer` is not set.");if(l.includes(".")){if(!e)throw new Error("ENS provider not defined.");l=await e.resolveName(l)??void 0}const c=await n["create(address,uint8[],uint8[])"](l,r,a),i=(await c.wait()).events.find((e=>"Created"===e.event));if(!i)throw new Error("Couldn’t find a creation event.");const[o]=i.args;I(o.toHexString())}catch(e){D({title:"Creation Error",description:(0,b.B9)(e),status:"error",isClosable:!0,duration:1e4}),console.error(e.stack)}finally{_(!1)}}),[y,e,d,n,D]);return n&&$&&!N?u.createElement(f.g_,{tokenId:$}):u.createElement(r.M5,null,u.createElement(r.Kq,null,u.createElement(r.X6,{textAlign:"center"},"Create a New Token Type"),p?u.createElement(r.kC,{justify:"center"},u.createElement(c.$,{thickness:"4px"}),u.createElement(r.xv,{ml:2},"Connecting…")):N?u.createElement(r.kC,{justify:"center",mt:7},u.createElement(c.$,null),u.createElement(r.xv,{ml:2},"Reserving your token…")):$?u.createElement(r.xv,null,"¿How’d we get here?"):u.createElement(r.Kq,{as:"form",onSubmit:q(M)},u.createElement(r.kC,{align:"center"},u.createElement(a.m$.label,{mr:3},"Admin:"),u.createElement(i.II,{...j("maintainer"),placeholder:"Maintainer Address (default Creator)"})),u.createElement(o.iA,{mb:5},u.createElement(o.hr,null,u.createElement(o.Tr,null,u.createElement(o.Th,null,"Role"),u.createElement(o.Th,null,u.createElement(m.u,{label:"Give the admin these roles:"},"Grant")),u.createElement(o.Th,null,u.createElement(m.u,{label:"Prevent these permissions from being checked:"},"Disable")),u.createElement(o.Th,null,"Description"))),u.createElement(o.p3,null,A.map(((e,t)=>u.createElement(o.Tr,{key:t},u.createElement(o.Td,null,e),u.createElement(o.Td,{textAlign:"center"},u.createElement(s.XZ,{...j(`grant(${e})`)})),u.createElement(o.Td,{textAlign:"center"},u.createElement(s.XZ,{...j(`disable(${e})`)})),u.createElement(o.Td,null,k.mI[e])))))),u.createElement(f.Mm,{purpose:"create",label:"Reserve an ID"}))))},g=p}}]);
//# sourceMappingURL=233.bundle.js.map