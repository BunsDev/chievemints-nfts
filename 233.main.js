"use strict";(self.webpackChunk_chievemints_ui=self.webpackChunk_chievemints_ui||[]).push([[233],{87233:(e,t,n)=>{n.r(t),n.d(t,{New:()=>y,default:()=>v});var r=n(64033),a=n(33541),l=n(54805),c=n(69204),i=n(26106),o=n(80038),m=n(86915),s=n(70691),u=n(79338),E=n(81445),d=n(2784),h=n(4301),w=n(18813),f=n(63955),g=n(50725),k=n(60146),b=n(18671),p=n(62833);const y=()=>d.createElement(r.W2,{maxW:"full"},d.createElement(b.q,null,d.createElement("title",null,"’𝖈𝖍𝖎𝖊𝖛𝖊: Ⲛⲉⲱ Ⲧⲟⲕⲉⲛ")),d.createElement(a.m$.header,null,d.createElement(r.kC,{justify:"center"},d.createElement(w.h4,{my:"7vh",maxW:"xl"}))),d.createElement(a.m$.main,null,d.createElement(C,null))),C=()=>{const{ensProvider:e,roContract:t,rwContract:n,connecting:b,connect:y,chain:C,address:v}=(0,E.$6)(),[x,I]=(0,p.lr)({tokenId:""}),$=x.get("tokenId"),[T,S]=(0,d.useState)(Array.isArray($)?$[0]:$),[A,N]=(0,d.useState)([]),[P,_]=(0,d.useState)(!1),{register:j,handleSubmit:R}=(0,f.cI)(),q=(0,l.pm)(),{rolePermissions:z}=g.k;(0,d.useEffect)((()=>{"string"==typeof $&&S($)}),[$]),(0,d.useEffect)((()=>{(async()=>{if(t){const e=await t.roleIndexForName("ReservedLast")-1,n=await Promise.all(Array.from({length:e}).map((async(e,n)=>await t.roleNameByIndex(n+1))));N(n)}})()}),[t]);const D=(0,d.useCallback)((async r=>{_(!0);try{if(!n)throw new Error("Connect your wallet to reserve an id.");if(!t)throw new Error("Library not loaded.");const a=[],l=[];await Promise.all(Object.entries(r).map((async([e,t])=>{if("boolean"==typeof t&&t){const[,t,r]=e.match(/^(grant|disable)\((.+)\)$/)??[],c=await n.roleIndexForName(r);switch(t){case"grant":a.push(c);break;case"disable":l.push(c);break;default:throw new Error(`Unknown operation: ${t}`)}}})));let{maintainer:c}=r;if(""===c&&(c=v),null==c)throw new Error("`maintainer` is not set.");if(c.includes(".")){if(!e)throw new Error("ENS provider not defined.");c=await e.resolveName(c)??void 0}const i=await n["create(address,uint8[],uint8[])"](c,a,l),o=(await i.wait()).events.find((e=>"Created"===e.event));if(!o)throw new Error("Couldn’t find a creation event.");const[m]=o.args;S(m.toHexString())}catch(e){q({title:"Creation Error",description:(0,k.B9)(e),status:"error",isClosable:!0,duration:1e4}),console.error(e.stack)}finally{_(!1)}}),[v,e,t,n,q]);return n&&T&&!P?d.createElement(w.g_,{tokenId:T}):d.createElement(r.M5,null,d.createElement(r.Kq,null,d.createElement(r.X6,{textAlign:"center"},"Create a New Token Type"),b?d.createElement(r.kC,{justify:"center"},d.createElement(c.$,{thickness:"4px"}),d.createElement(r.xv,{ml:2},"Connecting…")):C&&C!==h.g.contract.chainId?d.createElement(i.zx,{colorScheme:"blue",onClick:()=>{(0,k.gu)(h.g.contract.chainId)}},"Switch to the",d.createElement(a.m$.span,{mx:1.5,title:`${C} ≠ ${h.g.contract.chainId}`},h.g.contract.name),"chain"):n?P?d.createElement(r.kC,{justify:"center",mt:7},d.createElement(c.$,null),d.createElement(r.xv,{ml:2},"Reserving your token…")):T?d.createElement(r.xv,null,"¿How’d we get here?"):d.createElement(r.Kq,{as:"form",onSubmit:R(D)},d.createElement(r.kC,{align:"center"},d.createElement(a.m$.label,{mr:3},"Admin:"),d.createElement(o.II,{...j("maintainer"),placeholder:"Maintainer Address (default Creator)"})),d.createElement(m.iA,{mb:5},d.createElement(m.hr,null,d.createElement(m.Tr,null,d.createElement(m.Th,null,"Role"),d.createElement(m.Th,null,d.createElement(s.u,{label:"Give the admin these roles:"},"Grant")),d.createElement(m.Th,null,d.createElement(s.u,{label:"Prevent these permissions from being checked:"},"Disable")),d.createElement(m.Th,null,"Description"))),d.createElement(m.p3,null,A.map(((e,t)=>d.createElement(m.Tr,{key:t},d.createElement(m.Td,null,e),d.createElement(m.Td,{textAlign:"center"},d.createElement(u.XZ,{...j(`grant(${e})`)})),d.createElement(m.Td,{textAlign:"center"},d.createElement(u.XZ,{...j(`disable(${e})`)})),d.createElement(m.Td,null,z[e])))))),d.createElement(i.zx,{colorScheme:"green",type:"submit"},"Reserve an ID")):(console.info({rwContract:n}),d.createElement(i.zx,{colorScheme:"blue",onClick:y},"Connect"))))},v=y}}]);