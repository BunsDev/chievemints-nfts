"use strict";(self.webpackChunk_chievemints_ui=self.webpackChunk_chievemints_ui||[]).push([[875],{82875:(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});var a=n(2784),l=n(64033),r=n(69204),s=n(54805),c=n(41135),i=n(96035),m=n(42840),o=n(46652),u=n(1525),E=n(79338),d=n(26106),h=n(60146),v=n(14738),w=n(18813),y=n(10289),C=n(18671);const p=({name:e})=>{const{ensProvider:t}=(0,v.$6)(),n=(0,a.useMemo)((()=>/^0x[a-z0-9]{40}$/i.test(e)),[e]),[s,c]=(0,a.useState)(n?void 0:null);return(0,a.useMemo)((()=>{n||(async()=>{const n=await(t?.resolveName(e));c(n??"Not Found")})()}),[n,t,e]),a.createElement(a.Fragment,null,a.createElement(l.xv,null,e,null!=s&&a.createElement(l.xv,{ml:2,as:"em"},"(",s,")")),null===s&&a.createElement(r.$,{size:"xs"}))},f=e=>e.split(/\s*[\s,;:/\\|]+\s*/).filter((e=>e&&""!==e)),b=()=>{const{nftId:e}=(0,y.UO)(),t=(0,a.useMemo)((()=>(0,h.Ke)(Array.isArray(e)?e[0]:e)),[e]),[n,b]=(0,a.useState)(),[k,x]=(0,a.useState)(),[S,g]=(0,a.useState)(),[N,$]=(0,a.useState)(""),[F,M]=(0,a.useState)("whitelist"),{ensProvider:I,address:T,roContract:z,rwContract:A,connect:D}=(0,v.$6)(),[P,_]=(0,a.useState)([]),K=(0,s.pm)();(0,a.useEffect)((()=>{(async()=>{_(f(N).map(((e,t)=>a.createElement(p,{key:t,name:e}))))})()}),[I,N]);const O=(0,a.useMemo)((()=>k?.name??`#${t}`),[k,t]);(0,a.useEffect)((()=>{(async()=>{if(z&&T&&t)try{b(Number((await z.balanceOf(T,t)).toString()))}catch(e){g(e.message)}})()}),[T,z,t]),(0,a.useEffect)((()=>{(async()=>{if(z&&t)try{const e=await z.uri(t);if(e){const t=await fetch((0,h._m)(e));x(await t.json())}else x(null)}catch(e){g(e.message)}})()}),[z,t]);const L=(0,a.useCallback)((async e=>{if(e.preventDefault(),A)try{const e=await Promise.all(f(N).map((async e=>{const t=await(I?.resolveName(e));if(!t)throw new Error(`Couldn't Resolve Name: “${e}”`);return t})));switch(F){case"mint":{const n=await(A?.["mint(address[],uint256,bytes)"](e,t,[]));await n.wait();break}case"whitelist":console.debug("whitelist",{addrs:e}),e.map((async e=>{await(z?.roleIndexForName("Minter")),await(A?.["mint(address,uint256,uint256,bytes)"](e,t,1,[]))}))}}catch(e){K({title:`${(0,h.kC)(F)}ing Error`,description:(0,h.B9)(e),status:"error",isClosable:!0,duration:1e4})}else K({title:"Contract Error!",description:"Token is not Connected.",status:"error",isClosable:!0,duration:1e4})}),[F,I,N,z,A,K,t]);return S?a.createElement(c.bZ,{status:"error"},a.createElement(c.zM,null),a.createElement(c.Cd,{mr:2},"Error: Loading NFT"),a.createElement(c.X,null,S)):a.createElement(l.W2,{maxW:"40rem"},a.createElement(C.q,null,a.createElement("title",null,"Disburse NFT #",t),a.createElement("meta",{name:"description",content:"Distribute A ’Chievemint NFT"})),a.createElement(w.dL,null),a.createElement(l.Kq,{as:"form",onSubmit:L},null===k?a.createElement(l.xv,{my:8},"Token ",O," does not exist."):T?null==n?a.createElement(l.kC,{my:8},a.createElement(r.$,null),a.createElement(l.xv,{ml:2},"Loading Balance…")):a.createElement(l.xv,{my:8},"Distribute up to ",n," “",O,"” tokens:"):a.createElement(l.xv,{my:8},"Connect your wallet to distribute “",O,"” tokens…"),a.createElement(i.mQ,{isFitted:!0,variant:"enclosed"},a.createElement(i.td,{mb:"1em"},a.createElement(i.OK,null,"CSV"),a.createElement(i.OK,null,"Parsed")),a.createElement(i.nP,null,a.createElement(i.x4,null,a.createElement(m.NI,null,a.createElement(m.lX,null,"Comma, Space, or Semicolon Separated ETH or ENS Addresses:"),a.createElement(o.g,{height:64,placeholder:"Enter space, semicolon, or comma separated eth addresses.",value:N,onChange:({target:{value:e}})=>{$(e)}}))),a.createElement(i.x4,null,a.createElement(l.GS,null,P.map(((e,t)=>a.createElement(l.HC,{key:t,justifyContent:"center"},e))))))),a.createElement(m.NI,null,a.createElement(u.Ee,{onChange:M,value:F},a.createElement(u.Y8,{value:"mint"},"Mint"),a.createElement(u.Y8,{value:"whitelist",ml:5},"Whitelist"))),a.createElement(m.NI,null,a.createElement(E.XZ,{name:"skip",value:"true"},"Skip existing holders")),a.createElement(m.NI,{textAlign:"center"},A?a.createElement(d.zx,{type:"submit",colorScheme:"green"},"Distribute"):a.createElement(d.zx,{onClick:D},"Connect"))))}}}]);
//# sourceMappingURL=875.bundle.js.map