"use strict";(self.webpackChunk_chievemints_ui=self.webpackChunk_chievemints_ui||[]).push([[763],{8763:(e,t,a)=>{a.r(t),a.d(t,{default:()=>w});var n=a(2784),i=a(60146),r=a(18813),s=a(14738),l=a(18671),c=a(62833),o=a(10289),m=a(96111),u=a.n(m),h=a(50725),f=a(64033),g=a(33541),E=a(26106);const w=()=>{const[e,t]=(0,n.useState)([]),[a]=(0,c.lr)(),[m,w]=(0,n.useState)(Number(a.get("limit")??h.ce.limit)),[d,b]=(0,n.useState)(Number(a.get("offset")??h.ce.offset)),[p,y]=(0,n.useState)("true"===a.get("gating")),S=a.get("visible")??h.ce.visible,[k,v]=(0,n.useState)((0,i.XR)(S)),x=(0,o.s0)(),{roContract:C,constsContract:B}=(0,s.$6)(),I=(0,n.useCallback)(((e,a)=>{let n;return t((t=>(n={...t[e],...a},[...t.slice(0,e),n,...t.slice(e+1)]))),n}),[t]),[N,P]=(0,n.useState)(null),[W,_]=(0,n.useState)(null),[T,$]=(0,n.useState)(null),[j,A]=(0,n.useState)(null);(0,n.useEffect)((()=>{const e={};k?.length>0?Object.assign(e,{visible:k.toString()}):Object.entries({limit:m,offset:d,gating:p}).forEach((([t,a])=>{a!==h.ce[t]&&Object.assign(e,{[t]:a.toString()})}));const t={search:`?${(0,c.fW)(e)}`};x(t,{replace:!0})}),[k,m,d,p,x]),(0,n.useEffect)((()=>{C&&B&&(C.typeSupply().then((e=>e.toBigInt())).then(P),B.GATING_TYPE().then((e=>e.toBigInt())).then(_),B.TYPE_WIDTH().then($),B.TYPE_BOUNDARY().then(A))}),[C,B]),(0,n.useEffect)((()=>{v((0,i.XR)(S))}),[S]);const G=(0,n.useCallback)((async(e,t=!0)=>{const a=d+(e-1);try{const n=(await C.tokenByIndex(e)).toBigInt(),i=(n&2n**BigInt(T)-1n<<BigInt(j))===W,r={gating:i,hidden:t&&i&&!p};return I(a,{id:`0x${n.toString(16)}`,is:r,index:e})}catch(e){return I(a,{error:(0,i.B9)(e)})}}),[W,j,T,p,d,C,I]),O=(0,n.useCallback)((async e=>await Promise.allSettled(e.map((async(e,t)=>{if(!(e instanceof Error)){if(e.is?.hidden)throw new Error("Token is hidden.");try{const a=await C.uri(e.id);if(""===a)throw new Error("No URI… Waiting for configuration…");I(t,{uri:a});const n=await fetch((0,i._m)(a)),r=await n.text();if(!r||""===r.trim())throw new Error("Aww, No Data. 😾");try{const[a,n,i]=await Promise.all([Promise.resolve(u().parse(r)),C.totalSupply(e.id),C.getMax(e.id)]);return I(t,{metadata:a,total:n,max:i})}catch(e){throw console.error({message:(0,i.B9)(e),error:e,data:r}),e}}catch(e){return console.error({stack:e.stack}),I(t,{error:(0,i.B9)(e)})}}})))),[C,I]);return(0,n.useEffect)((()=>{(async()=>{if(C&&B){const e=[];if(k.some((()=>!0)))e.push(...k.map((async e=>{let{high:t,low:a}=e;const n=[t,a];return n.sort(),[a,t]=n,n.some((e=>null!=e))||([t,a]=[e,e]),await Promise.all(Array.from({length:t-a+1}).map((async(e,t)=>await G(a+t,!1))))})));else{const t=d<0?N+d:d,a=Math.min(m,Number(N)-t);e.push(...Array.from({length:a}).map((async(e,a)=>await G(t+a+1))))}const t=(await Promise.all(e)).flat();await O(t)}})()}),[k,O,C,B,m,d,G,N]),n.createElement(f.W2,{maxW:"full"},n.createElement(l.q,null,n.createElement("title",null,"𝔐𝔢𝔱𝔞𝔊𝔞𝔪𝔢’𝔰 ’𝓒𝓱𝓲𝓮𝓿𝓮𝓶𝓲𝓷𝓽𝓼"),n.createElement("meta",{name:"description",content:"MetaGame’s ’Chievemint NFTs"})),n.createElement(g.m$.header,{h:"45vh"},n.createElement(f.kC,{maxW:"40rem",margin:"auto"},n.createElement(r.h4,{mt:"5vh",h:"40vh"}))),n.createElement(g.m$.main,null,n.createElement(f.Kq,{align:"center"},n.createElement(r.$B,{flexGrow:1,limit:m,setLimit:w,offset:d,setOffset:b,gatingVisible:p,setGatingVisible:y,visibleList:k,setVisibleList:v}),n.createElement(r.jq,{tokens:e}),n.createElement(f.kC,{justify:"center"},n.createElement(E.zx,{onClick:()=>{if(k.length>0){const e=k.map((e=>e?.high??e)),t=Math.max(...e);v((e=>[...e,{low:t,high:t+10}]))}else w((e=>e+10))}},n.createElement(f.xv,{as:"span",mr:1,mt:-.5,fontSize:"150%",fontWeight:"bold"},"+"),"10"),n.createElement(E.zx,{ml:5,onClick:()=>b((e=>e+m))},n.createElement(f.xv,{as:"span",mr:.75,mt:-1,fontSize:"200%",fontWeight:"bold"},"↓"),m)))))}}}]);