"use strict";(self.webpackChunk_chievemints_ui=self.webpackChunk_chievemints_ui||[]).push([[525],{85525:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var i=n(2784),a=n(60146);class r extends Error{constructor(e){super(e),this.name="HiddenError"}}var l=n(18813),s=n(14738),o=n(18671),c=n(62833),u=n(10289),m=n(96111),h=n.n(m),g=n(23244),f=n(64033),E=n(33541),b=n(26106);const d=()=>{const[e,t]=(0,i.useState)([]),[n]=(0,c.lr)(),[m,d]=(0,i.useState)(Number(n.get("limit")??g.ce.limit)),[p,w]=(0,i.useState)(Number(n.get("offset")??g.ce.offset)),[x,S]=(0,i.useState)("true"===n.get("gating")),k=n.get("visible")??g.ce.visible,[v,I]=(0,i.useState)((0,a.XR)(k)),y=(0,u.s0)(),{roContract:B,bitsLibrary:C}=(0,s.$6)(),N=(0,i.useCallback)(((e,n)=>{let i;return t((t=>(i={...t[e],...n},[...t.slice(0,e),...Array.from({length:e-t.length},(()=>({}))),i,...t.slice(e+1)]))),i}),[t]),[W,_]=(0,i.useState)(null),[A,T]=(0,i.useState)(null),[$,z]=(0,i.useState)(null),[G,O]=(0,i.useState)(null),[R,j]=(0,i.useState)(null);(0,i.useEffect)((()=>{const e={};v?.length>0?Object.assign(e,{visible:v.toString()}):Object.entries({limit:m,offset:p,gating:x}).forEach((([t,n])=>{n!==g.ce[t]&&Object.assign(e,{[t]:n.toString()})}));const t={search:`?${(0,c.fW)(e)}`};y(t,{replace:!0})}),[v,m,p,x,y]),(0,i.useEffect)((()=>{B&&C&&(B.typeSupply().then((e=>e.toBigInt())).then(_),C.GATING_TYPE().then((e=>e.toBigInt())).then(T),C.DISABLING_TYPE().then((e=>e.toBigInt())).then(z),C.TYPE_WIDTH().then(O),C.TYPE_BOUNDARY().then(j))}),[B,C]),(0,i.useEffect)((()=>{I((0,a.XR)(k))}),[k]);const D=(0,i.useRef)(null),L=(0,i.useCallback)((async e=>(D.current?.abort(),D.current=new AbortController,t([]),await Promise.allSettled(e.map((async(e,t)=>{try{const n=e.id??(await B.tokenByIndex(e.index)).toBigInt(),i=n&2n**BigInt(G)-1n<<BigInt(R),l=e.is?.gating??i===A,s=e.is?.disabling??i===(A|$),o=e.gates??(l||s?Number(2n**32n-1n&n):null),c={gating:l,disabling:s,hidden:0!=e.hidable&&(l||s)&&!x};if(N(t,{id:`0x${n.toString(16)}`,index:e.index,gates:o,is:c}),c.hidden)throw new r("Token is hidden.");const u=e.uri??await B.uri(n);if(""===u)throw new Error("No URI… Waiting for configuration…");N(t,{uri:u});const m=await fetch((0,a._m)(u),{signal:D.current.signal});if(!m.ok)throw new Error(`Request Status: ${m.status}`);const g=await m.text();if(!g||""===g.trim())throw new Error("Aww, No Data. 😾");N(t,{metadata:h().parse(g)}),B.totalSupply(n).then((e=>{N(t,{total:e.toBigInt()})})),B.getMax(n).then((e=>{N(t,{max:e.toBigInt()})}))}catch(e){if(e instanceof r||console.error({error:e}),!(e instanceof DOMException))return N(t,{error:(0,a.B9)(e)})}}))))),[A,R,G,$,x,B,N]);return(0,i.useEffect)((()=>{(async()=>{if(B&&C&&null!=W&&null!=G&&null!=R&&null!=A&&null!=$){const e=[];if(v.some((()=>!0)))v.forEach((t=>{let{high:n,low:i}=t;([i,n]=[i,n].sort(((e,t)=>e-t))).some((e=>null==e))&&([n,i]=[t,t]),e.push(...Array.from({length:n-i+1}).map(((e,t)=>({index:i+t,hidable:!1}))))}));else{const t=p<0?Number(W)+p:p,n=Math.min(m,Number(W)-t);e.push(...Array.from({length:n}).map(((e,n)=>({index:t+n+1}))))}await L(e)}})()}),[v,L,B,C,m,p,W,G,R,A,$]),i.createElement(f.W2,{maxW:"full"},i.createElement(o.q,null,i.createElement("title",null,"𝔐𝔢𝔱𝔞𝔊𝔞𝔪𝔢’𝔰 ’𝘾𝙝𝙞𝙚𝙫𝙚𝙢𝙞𝙣𝙩𝙨"),i.createElement("meta",{name:"description",content:"MetaGame’s ’Chievemint NFTs"})),i.createElement(E.m$.header,{h:"45vh"},i.createElement(f.kC,{maxW:"40rem",margin:"auto"},i.createElement(l.h4,{mt:"5vh",h:"40vh"}))),i.createElement(E.m$.main,null,i.createElement(f.Kq,{align:"center"},i.createElement(l.$B,{flexGrow:1,limit:m,setLimit:d,offset:p,setOffset:w,gatingVisible:x,setGatingVisible:S,visibleList:v,setVisibleList:I}),i.createElement(l.jq,{tokens:e}),i.createElement(f.kC,{justify:"center"},i.createElement(b.zx,{onClick:()=>{if(v.length>0){const e=v.map((e=>e?.high??e)),t=Math.max(...e);I((e=>[...e,{low:t,high:t+10}]))}else d((e=>e+10))}},i.createElement(f.xv,{as:"span",mr:1,mt:-.5,fontSize:"150%",fontWeight:"bold"},"+"),"10"),i.createElement(b.zx,{ml:5,onClick:()=>w((e=>e+m))},i.createElement(f.xv,{as:"span",mr:.75,mt:-1,fontSize:"200%",fontWeight:"bold"},"↓"),m),i.createElement(b.zx,{ml:5,onClick:()=>w((e=>e-m))},i.createElement(f.xv,{as:"span",mr:.75,mt:-1,fontSize:"200%",fontWeight:"bold"},"↑"),m)))))}}}]);
//# sourceMappingURL=525.bundle.js.map